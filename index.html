<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Weather Dashboard</title>
</head>

<body>
    <p>Weather Dashboard</p>
    <input type="text" id="searchCity"></input>
    <button id="search">Search</button>
    <ul id="current-weather">

    </ul>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


    <script type="text/javascript">
        var key = "59e42ab69c520d95ac336e9cccb57653";

        function getUVIndex(lat, lon) {
            var queryURL = "https://api.openweathermap.org/data/2.5/uvi?appid=" +
                key +
                "&lat=" +
                lat +
                "&lon=" +
                lon;
            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function(response) {
                var UVIndex = response.value;
                var uv = $("<li>").text("UV Index : " + UVIndex);
                $("#current-weather").append(uv);
            })

        }

        function getWeather(cityName) {

            var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" +
                cityName +
                "&appid=" +
                key;

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function(response) {
                    console.log(response);
                    var cityName = $("<li>").text("Name: " + response.name);
                    var tempInKelvin = response.main.temp;
                    var tempInCelsius = response.main.temp - 273.15;
                    var temp = $("<li>").text("Temp : " +
                        tempInCelsius.toFixed(1) +
                        "C");
                    var humidity = $("<li>").text("Humidity : " + response.main.humidity + "%");
                    var windSpeed = $("<li>").text("Wind : " + response.wind.speed + " m/s");
                    var cityLat = response.coord.lat;
                    var cityLon = response.coord.lon;
                    getUVIndex(cityLat, cityLon);
                    $("#current-weather").append(cityName);
                    $("#current-weather").append(temp);
                    $("#current-weather").append(humidity);
                    $("#current-weather").append(windSpeed);


                }

            )
        }

        function searchWeather() {

            var cityName = $("#searchCity").val();
            console.log("I am search for the weather in this city: " + cityName);

            getWeather(cityName);



        }

        $("button").on("click",
            searchWeather
        );
    </script>
</body>

</html>
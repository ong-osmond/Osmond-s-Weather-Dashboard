<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Weather Dashboard</title>
</head>

<body>
    <p>Weather Dashboard</p>
    <input type="text" id="searchCity"></input>
    <button id="search">Search</button>
    <ul id="current-weather">

    </ul>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


    <script type="text/javascript">
        // function addArticles(newsArticles) {
        //     for (i = 0; i < newsArticles.length; i++) {
        //         var lineItem = $("<li>");
        //         $("#articles-appear-here").append(lineItem);
        //         const newsArticle = newsArticles[i].headline.main;
        //         const author = newsArticles[i].byline.original;
        //         const snippet = newsArticles[i].snippet;
        //         const url = newsArticles[i].web_url;
        //         console.log(newsArticle);
        //         var headline = $("<a>").text(newsArticle);
        //         lineItem.append(headline);
        //         headline.attr("href", url);
        //         headline.attr("target", "_blank");
        //         var authorName = $("<p>").text(author);
        //         lineItem.append(authorName);
        //         var snippetText = $("<p>").text(snippet);
        //         lineItem.append(snippetText);

        //     }
        // }


        function getWeather(cityName) {
            var key = "59e42ab69c520d95ac336e9cccb57653";
            var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" +
                cityName +
                "&appid=" +
                key;

            console.log(queryURL);

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function(response) {
                    console.log(response);
                    var cityName = $("<li>").text("Name: " + response.name);
                    var tempInKelvin = response.main.temp;
                    var tempInCelsius = response.main.temp - 273.15;
                    var temp = $("<li>").text("Temp : " +
                        tempInCelsius.toFixed(1) +
                        "C");
                    var humidity = $("<li>").text("Humidity : " + response.main.humidity + "%");
                    var windSpeed = $("<li>").text("Wind : " + response.wind.speed + " m/s");
                    var cityLat = response.coord.lat;
                    var cityLon = response.coord.lon;
                    var uv = $("<li>").text("UV Index : ");
                    $("#current-weather").append(cityName);
                    $("#current-weather").append(temp);
                    $("#current-weather").append(humidity);
                    $("#current-weather").append(windSpeed);
                    $("#current-weather").append(uv);

                }

            )
        }

        function searchWeather() {

            var cityName = $("#searchCity").val();
            console.log("I am search for the weather in this city: " + cityName);

            getWeather(cityName);



        }

        $("button").on("click",
            searchWeather
        );
    </script>
</body>

</html>